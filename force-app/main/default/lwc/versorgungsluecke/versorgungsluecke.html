<template>
    <lightning-card
        class="card"
        title="Versorgunslücke"
        icon-name="standard:formula"
    >
        <div class="slds-m-around_medium">
            <lightning-input
                min="0"
                class="width"
                type="number"
                variant="standard"
                name="name"
                formatter="currency"
                onchange={wunschRenteChanged}
                onclick={clearInput}
                onfocus={clearInput}
                placeholder="0"
                label="Wunsch Einkommen Rente"
                value="0"
            ></lightning-input>
            <lightning-input
                min="0"
                class="width"
                type="number"
                variant="standard"
                name="name"
                onchange={moreIncomingChanged}
                onclick={clearInput}
                onfocus={clearInput}
                formatter="currency"
                placeholder="0"
                label="Weiteres Einkommen im Alter"
                value="0"
            ></lightning-input>
            <div class="format-number">
                <div>Gesetztl. Altersrente (mtl.)</div>
                <lightning-formatted-number
                    format-style="currency"
                    class="ml08"
                    value={rente}
                ></lightning-formatted-number>
            </div>
            <div class="hr-line width"></div>
            <div class="out-field-container">
                <p class="big-text label">Versorgungslücke:</p>
                <lightning-formatted-number
                    class="big-text diff-out"
                    value={versorgungsluecke}
                    format-style="currency"
                ></lightning-formatted-number>
            </div>
            <div>
                <lightning-input
                    min="0"
                    class="width"
                    type="number"
                    variant="standard"
                    name="name"
                    formatter="currency"
                    onchange={possibleSavingChanged}
                    onclick={clearInput}
                    placeholder="0"
                    onfocus={clearInput}
                    label="Möglicher Sparbetrag"
                    value="0"
                ></lightning-input>
                <div class="slider">
                    <lightning-slider
                        onchange={yearChanged}
                        label="Jahre"
                        step="1"
                        min="1"
                        max="99"
                        value="1"
                    ></lightning-slider>
                </div>
            </div>
            <div class="hr-line out-line width"></div>
            <div class="out-field-container">
                <p class="big-text label">Versorgung:</p>
                <lightning-formatted-number
                    class="out-number versorgung big-text"
                    value={versorgung}
                    format-style="currency"
                ></lightning-formatted-number>
            </div>

            <div style="margin-top: 2rem;">
                <p
                    style="
                        margin-bottom: 1.3em;
                        font-size: 1.3em;
                        padding: 0.5em;
                    "
                >
                    Debug:
                </p>
                <p><b>Formel Versorgungsluecke:</b></p>
                <p>
                    "Versorgungslücke" = "Wunsch Einkommen Rente" - "Weiteres
                    Einkommen im Alter" - "Gesetztl.Altersrente"
                </p>
                <p>
                    <code>
                        {Versorgungsluecke} = {wunschRente} - {moreIncoming} -
                        {Rente}</code
                    >
                </p>

                <table style="border: 1px solid black; margin-top: 1em;">
                    <tr>
                        <th>Variable</th>
                        <th>Wert</th>
                    </tr>
                    <tr>
                        <td>Versorgungslücke</td>
                        <td>{Versorgungsluecke}</td>
                    </tr>
                    <tr>
                        <td>Wunsch Einkommen Rente</td>
                        <td>{wunschRente}</td>
                    </tr>
                    <tr>
                        <td>Weiteres Einkommen im Alter</td>
                        <td>{moreIncoming}</td>
                    </tr>

                    <tr>
                        <td>"Gesetztl. Altersrente"</td>
                        <td>{Rente}</td>
                    </tr>
                </table>
                <br />
                <br />
                <br />

                <p><b>Formel Versorgung (Wie es in Teams steht:)</b></p>
                <p>
                    x = "Möglicher Sparbetrag" * 1.0237 * (1.0237 ^jahre) - 1 /
                    0.0237
                </p>
                <p>
                    <code>
                        {X} = {possibleSaving} * 1.0237 * (1.0237 ^ {year}) - 1
                        / 0.237
                    </code>
                </p>
                <br />
                <p>
                    Versorgung = Versorgungslücke - x
                </p>
                <p><code> {Versorgung} = {Versorgungsluecke} - {x}</code></p>

                <table style="border: 1px solid black; margin-top: 1em;">
                    <tr>
                        <th>Variable</th>
                        <th>Wert</th>
                    </tr>
                    <tr>
                        <td>Versorgungslücke</td>
                        <td>{Versorgungsluecke}</td>
                    </tr>
                    <tr>
                        <td>Möglicher Sparbetrag</td>
                        <td>{possibleSaving}</td>
                    </tr>
                    <tr>
                        <td>Jahre</td>
                        <td>{year}</td>
                    </tr>
                    <tr>
                        <td>x</td>
                        <td>{X}</td>
                    </tr>
                </table>
            </div>

            <canvas class="chart-versorg"></canvas>
        </div>
    </lightning-card>
</template>
